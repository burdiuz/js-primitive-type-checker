{"version":3,"file":"index.js","sources":["../source/utils.js"],"sourcesContent":["export const MERGE = '(Merge)';\nexport const GET_PROPERTY = '(GetProperty)';\nexport const SET_PROPERTY = '(SetProperty)';\nexport const ARGUMENTS = '(Arguments)';\nexport const RETURN_VALUE = '(ReturnValue)';\n\nexport function AsIs(value) {\n  if (this instanceof AsIs) {\n    this.value = value;\n  } else {\n    return new AsIs(value);\n  }\n}\n\nfunction asIs() {\n  return this.value;\n}\n\nAsIs.prototype.toString = asIs;\nAsIs.prototype.valueOf = asIs;\nAsIs.prototype[Symbol.toPrimitive] = asIs;\n\nexport const buildPath = (sequence) =>\n  sequence.reduce((str, name) => {\n    if (name instanceof AsIs) {\n      return `${str}${name}`;\n    } else if (String(parseInt(name, 10)) === name) {\n      return `${str}[${name}]`;\n    } else if (/^[a-z][\\w$]*$/i.test(name)) {\n      return str ? `${str}.${name}` : name;\n    }\n\n    return `${str}[\"${name}\"]`;\n  }, '');\n\nexport const checkPrimitiveType = (\n  action,\n  types,\n  name,\n  type,\n  errorReporter,\n  sequence,\n) => {\n  if (!type) {\n    return true;\n  }\n\n  const storedType = types[name];\n\n  if (storedType) {\n    if (storedType !== type) {\n      errorReporter(action, buildPath([...sequence, name]), storedType, type);\n\n      return false;\n    }\n  } else {\n    types[name] = type;\n  }\n\n  return true;\n};\n"],"names":["MERGE","GET_PROPERTY","SET_PROPERTY","ARGUMENTS","RETURN_VALUE","AsIs","value","asIs","prototype","toString","valueOf","Symbol","toPrimitive","buildPath","sequence","reduce","str","name","String","parseInt","test","checkPrimitiveType","action","types","type","errorReporter","storedType"],"mappings":";;;;MAAaA,QAAQ,SAAd;AACP,MAAaC,eAAe,eAArB;AACP,MAAaC,eAAe,eAArB;AACP,MAAaC,YAAY,aAAlB;AACP,MAAaC,eAAe,eAArB;;AAEP,AAAO,SAASC,IAAT,CAAcC,KAAd,EAAqB;MACtB,gBAAgBD,IAApB,EAA0B;SACnBC,KAAL,GAAaA,KAAb;GADF,MAEO;WACE,IAAID,IAAJ,CAASC,KAAT,CAAP;;;;AAIJ,SAASC,IAAT,GAAgB;SACP,KAAKD,KAAZ;;;AAGFD,KAAKG,SAAL,CAAeC,QAAf,GAA0BF,IAA1B;AACAF,KAAKG,SAAL,CAAeE,OAAf,GAAyBH,IAAzB;AACAF,KAAKG,SAAL,CAAeG,OAAOC,WAAtB,IAAqCL,IAArC;;AAEA,MAAaM,YAAaC,QAAD,IACvBA,SAASC,MAAT,CAAgB,CAACC,GAAD,EAAMC,IAAN,KAAe;MACzBA,gBAAgBZ,IAApB,EAA0B;WAChB,GAAEW,GAAI,GAAEC,IAAK,EAArB;GADF,MAEO,IAAIC,OAAOC,SAASF,IAAT,EAAe,EAAf,CAAP,MAA+BA,IAAnC,EAAyC;WACtC,GAAED,GAAI,IAAGC,IAAK,GAAtB;GADK,MAEA,IAAI,iBAAiBG,IAAjB,CAAsBH,IAAtB,CAAJ,EAAiC;WAC/BD,MAAO,GAAEA,GAAI,IAAGC,IAAK,EAArB,GAAyBA,IAAhC;;;SAGM,GAAED,GAAI,KAAIC,IAAK,IAAvB;CATF,EAUG,EAVH,CADK;;AAaP,MAAaI,qBAAqB,CAChCC,MADgC,EAEhCC,KAFgC,EAGhCN,IAHgC,EAIhCO,IAJgC,EAKhCC,aALgC,EAMhCX,QANgC,KAO7B;MACC,CAACU,IAAL,EAAW;WACF,IAAP;;;QAGIE,aAAaH,MAAMN,IAAN,CAAnB;;MAEIS,UAAJ,EAAgB;QACVA,eAAeF,IAAnB,EAAyB;oBACTF,MAAd,EAAsBT,UAAU,CAAC,GAAGC,QAAJ,EAAcG,IAAd,CAAV,CAAtB,EAAsDS,UAAtD,EAAkEF,IAAlE;;aAEO,KAAP;;GAJJ,MAMO;UACCP,IAAN,IAAcO,IAAd;;;SAGK,IAAP;CAxBK;;;;;;;;;;;"}