!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.PrimitiveTypeChecker={})}(this,function(e){"use strict";function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,r){return e(r={exports:{}},r.exports),r.exports}var n=t(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});const t=(e=>(r,t)=>Boolean(r&&e.call(r,t)))(Object.prototype.hasOwnProperty);r.hasOwn=t,r.default=t});r(n);n.hasOwn;var o=t(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t,o=(t=n)&&"object"==typeof t&&"default"in t?t.default:t;let c=null;const s=()=>c,i=()=>({wrapFunctionReturnValues:!0,wrapFunctionArguments:!1,wrapSetPropertyValues:!0,ignorePrototypeMethods:!1}),a={wrapFunctionReturnValues:!0,wrapFunctionArguments:!1,wrapSetPropertyValues:!0,ignorePrototypeMethods:!1},p=(e,r=null)=>o(r,e)?r[e]:a[e],u=(e,r,t,n)=>`${e}Error on "${r}" instead of "${t}" received "${n}"`,l=(e,r,t,n)=>console.error(u(e,r,t,n));let f=l;const g=()=>f;let y=!0;const h=()=>y,d=Symbol("type-checkers::info"),P=(e={})=>Object.assign({},e),T=e=>e?e[d]:void 0,R=(e,r)=>{e&&r&&(e[d]=r)},O=e=>!!T(e),E=(e,r,t)=>{delete e[r],t&&(e[r]=t)},m=(e,r,t)=>{E(e,r,T(t))},_=(e,r)=>e[r],b=(e,r)=>{const{deep:t,checker:n,children:c,config:s,names:i}=e;return n===r.checker?(e.deep=t||r.deep,e.children=((e,r)=>{for(const t in r)o(e,t)?e[t]=b(e[t],r[t]):e[t]=r[t];return e})(c,r.children),e.config=n.mergeConfigs(s,r.config,i)):console.error("TypeChecked objects can be merged only if using exactly same instance of type checker."),e},k=Symbol("type-checkers::target"),w={object:!0,function:!0},C=e=>Boolean(e&&w[typeof e]),S=e=>Boolean(e&&e[k]),j=(e,r,t,n)=>{if(!C(n))return n;let o=n;if(!S(n)){const{children:c}=r,s=_(c,t);if(s)o=e(n,{info:s});else{const{deep:s,names:i,checker:a}=r;o=e(n,{deep:s,names:[...i,t],checker:a}),m(c,t,o)}}return o};let v,A,V;const I=e=>e instanceof Function?(e=>new Proxy(e,{get:v,set:A,apply:V,construct:V}))(e):(e=>new Proxy(e,{get:v,set:A}))(e),F=(e,{deep:r=!0,names:t=[],config:n=null,children:o=null,checker:c=s(),info:i=null}={})=>i||((e,r,t=!0,n=[],o=P())=>({checker:e,config:r,deep:t,names:n,children:o}))(c,c.init(e,g(),n),r,t,P(o)),M=(e,r)=>C(e)&&h()&&!S(e)?(R(e,F(e,r)),I(e)):e;v=(e=>(r,t)=>{const n=r[t];if(t===d)return n;if(t===k)return r;const c=T(r),{names:s,config:i,checker:a}=c;return a.getProperty&&a.getProperty(r,t,n,i,s),!C(n)||S(n)||((e,r,t,n)=>!!(n instanceof Function&&!o(e,t)&&p("ignorePrototypeMethods",r)))(r,c,t,n)?n:((e,r,t,n)=>{const o=T(r),{deep:c,children:s,names:i,checker:a}=o;if(c||n instanceof Function){const r=_(s,t);r?n=e(n,{info:r}):(n=e(n,{deep:c,names:[...i,t],checker:a}),m(s,t,n))}return n})(e,r,t,n)})(M),A=(e=>(r,t,n)=>{if(t===k)throw new Error(`"${k}" is a virtual property and cannot be set`);return((e,r,t)=>{if(r===d){let n=T(e);return n=n&&t&&n!==t?b(n,t):t,e[r]=n,!0}if(!C(t)){const{names:n,config:o,checker:c}=T(e);return c.setProperty&&c.setProperty(e,r,t,o,n),e[r]=t,!0}return!1})(r,t,n)||((e,r,t,n)=>{const o=T(r),{deep:c,names:s,checker:i,config:a,children:u}=o;if(i.setProperty&&i.setProperty(r,t,n,a,s),p("wrapSetPropertyValues",o)){if(!S(n)){const r=_(u,t);n=e(n,r?{info:r}:{deep:c,names:[...s,t],checker:i})}m(u,t,n)}return r[t]=n,!0})(e,r,t,n)})(M),V=(e=>(r,t,n)=>{const o=T(r),{names:c,config:s,checker:i}=o;i.arguments&&i.arguments(r,t,n,s,c),n=((e,r,t)=>{const n=T(r);if(p("wrapFunctionArguments",n)){const{length:r}=t;for(let o=0;o<r;o++)t[o]=j(e,n,String(o),t[o])}return t})(e,r,n);let a=r.apply(t,n);return i.returnValue&&i.returnValue(r,t,a,s,c),p("wrapFunctionReturnValues",o)&&(a=j(e,o,"returnValue",a)),a})(M);const N=(e,r)=>{const t=F(e,r),{deep:n,names:o,checker:c,config:s,children:i}=t;return Object.keys(e).forEach(r=>{const t=e[r];if(c.getProperty(e,r,t,s,o),"object"==typeof t){let e=_(i,r);e?N(t,{info:e}):(e=N(t,{deep:n,names:[...o,r],checker:c}),E(i,r,e))}}),R(e,t),t};r.getDefaultTypeChecker=s,r.setDefaultTypeChecker=(e=>{c=e}),r.PROXY_WRAP_FUNCTION_RETURN_VALUES="wrapFunctionReturnValues",r.PROXY_WRAP_FUNCTION_ARGUMENTS="wrapFunctionArguments",r.PROXY_WRAP_SET_PROPERTY_VALUES="wrapSetPropertyValues",r.PROXY_IGNORE_PROTOTYPE_METHODS="ignorePrototypeMethods",r.getDefaultProxyConfig=i,r.setProxyConfig=(e=>Object.assign(a,e)),r.getProxyConfig=(()=>Object.assign({},a)),r.create=M,r.createDeep=((e,r)=>e&&"object"==typeof e&&h()&&!S(e)?(N(e,r),I(e)):e),r.ConsoleErrorReporter=l,r.ConsoleWarnReporter=((e,r,t,n)=>console.warn(u(e,r,t,n))),r.ThrowErrorReporter=((e,r,t,n)=>{throw new Error(u(e,r,t,n))}),r.getErrorReporter=g,r.setErrorReporter=(e=>{f=e}),r.isEnabled=h,r.setEnabled=((e=!0)=>{y=!!e}),r.getTargetInfo=T,r.setTargetInfo=R,r.hasTargetInfo=O,r.getTargetTypeChecker=(e=>e&&e[d]?e[d].checker:void 0),r.getTargetTypeCheckerConfig=(e=>{if(e&&e[d])return e[d].config}),r.mergeTargetInfo=b,r.getOriginalTarget=(e=>e[k]||e),r.merge=((e,...r)=>{let t={};return h()&&(e||(e={info:T(r.find(e=>O(e))),deep:!1}),t=M(t,e)),Object.assign(t,...r)}),r.properties=((e,r,...t)=>{if(!h())return e;if(!C(e))throw new Error("Target must be a valid object.");if(Object.isFrozen(e)||Object.isSealed(e))throw new Error("Target object should not be sealed or frozen.");t.length||(t=Object.keys(e));const{length:n}=t;for(let o=0;o<n;o+=1){const n=t[o],{writable:c,get:s,set:i}=Object.getOwnPropertyDescriptor(e,n);if(s&&i||c){const t=e[n];C(t)&&!S(t)&&(e[n]=M(t,r))}}return e}),r.isTypeChecked=S,r.isValidTarget=C,r.default=M});r(o);o.getDefaultTypeChecker,o.setDefaultTypeChecker,o.PROXY_WRAP_FUNCTION_RETURN_VALUES,o.PROXY_WRAP_FUNCTION_ARGUMENTS,o.PROXY_WRAP_SET_PROPERTY_VALUES,o.PROXY_IGNORE_PROTOTYPE_METHODS,o.getDefaultProxyConfig,o.setProxyConfig,o.getProxyConfig,o.create,o.createDeep,o.ConsoleErrorReporter,o.ConsoleWarnReporter,o.ThrowErrorReporter,o.getErrorReporter,o.setErrorReporter,o.isEnabled,o.setEnabled,o.getTargetInfo,o.setTargetInfo,o.hasTargetInfo,o.getTargetTypeChecker,o.getTargetTypeCheckerConfig,o.mergeTargetInfo,o.getOriginalTarget,o.merge,o.properties,o.isTypeChecked,o.isValidTarget;var c=t(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});const t=(e=>(r,t)=>Boolean(r&&e.call(r,t)))(Object.prototype.hasOwnProperty);r.hasOwn=t,r.default=t}),s=r(c);c.hasOwn;const i="(Arguments)",a="(ReturnValue)";function p(e){if(!(this instanceof p))return new p(e);this.value=e}function u(){return this.value}p.prototype.toString=u,p.prototype.valueOf=u,p.prototype[Symbol.toPrimitive]=u;const l=e=>e.reduce((e,r)=>r instanceof p?`${e}${r}`:String(parseInt(r,10))===r?`${e}[${r}]`:/^[a-z][\w$]*$/i.test(r)?e?`${e}.${r}`:r:`${e}["${r}"]`,""),f=(e,r,t,n,o,c)=>{if(!n)return!0;const s=r[t];if(s){if(s!==n)return o(e,l([...c,t]),s,n),!1}else r[t]=n;return!0},g=({types:e,errorReporter:r},t,n=[])=>{const o=t.types;for(const t in o)if(s(o,t)){const c=o[t],s=e[t];c&&s&&s!==c?r("(Merge)",l([...n,t]),s,c):e[t]=c}return{types:e,errorReporter:r}},y=e=>void 0===e?"":e instanceof Array?"array":typeof e,h=e=>{return function(r,t,n,o,c){const{types:s,errorReporter:i}=o,a=this.getTypeString(n);return f(e,s,t,a,i,c)}},d=h("(GetProperty)"),P=h("(SetProperty)");class T{constructor(){this.collectTypesOnInit=!0,this.getTypeString=y,this.mergeConfigs=g}init(e,r,t=null){let n={};return t?n=t:this.collectTypesOnInit&&Object.keys(e).forEach(r=>{n[r]=y(e[r])}),{types:n,errorReporter:r}}getProperty(e,r,t,n,o){return d.call(this,e,r,t,n,o)}setProperty(e,r,t,n,o){return P.call(this,e,r,t,n,o)}arguments(e,r,t,n,o){const{types:c,errorReporter:s}=n,{length:a}=t;let p=!0;for(let e=0;e<a;e++){const r=this.getTypeString(t[e]);p=f(i,c,String(e),r,s,o)&&p}return p}returnValue(e,r,t,n,o){const{types:c,errorReporter:s}=n,i=this.getTypeString(t);return f(a,c,p(a),i,s,o)}}var R=Object.freeze({MERGE:"(Merge)",ARGUMENTS:i,GET_PROPERTY:"(GetProperty)",RETURN_VALUE:a,SET_PROPERTY:"(SetProperty)",buildPath:l,AsIs:p,checkPrimitiveType:f,mergeConfigs:g,getTypeString:y,propertyCheckerFactory:h,PrimitiveTypeChecker:T,default:T}),O=R&&T||R,E=t(function(e,r){o.setDefaultTypeChecker(new O.PrimitiveTypeChecker),Object.assign(r,O,o)});e.default=E,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=primitive-type-checker.min.js.map
